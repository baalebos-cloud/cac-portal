<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - CAC Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">CAC Admin Dashboard</a>
        <div class="d-flex">
            <span class="navbar-text me-3">Logged in as: {{ current_user.email }}</span>
            <a href="{{ url_for('admin.admin_logout') }}" class="btn btn-outline-light">Logout</a>
        </div>
    </div>
</nav>

<div class="container">

    <h3 class="mb-3">Business Name Submissions</h3>
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Proposed Name</th>
                <th>Owner Name</th>
                <th>Email</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for b in business_names %}
            <tr>
                <td>{{ b.id }}</td>
                <td>{{ b.proposed_name }}</td>
                <td>{{ b.first_name }} {{ b.surname }}</td>
                <td>{{ b.email }}</td>
                <td>{{ b.status }}</td>
            </tr>
            {% else %}
            <tr><td colspan="5" class="text-center">No submissions yet</td></tr>
            {% endfor %}
        </tbody>
    </table>

    <h3 class="mb-3 mt-5">Company Submissions</h3>
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Company Name</th>
                <th>Director</th>
                <th>Email</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for c in companies %}
            <tr>
                <td>{{ c.id }}</td>
                <td>{{ c.company_name }}</td>
                <td>{{ c.director_name }}</td>
                <td>{{ c.email }}</td>
                <td>{{ c.status }}</td>
            </tr>
            {% else %}
            <tr><td colspan="5" class="text-center">No company submissions</td></tr>
            {% endfor %}
        </tbody>
    </table>

    <h3 class="mb-3 mt-5">NGO Submissions</h3>
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>NGO Name</th>
                <th>Authorized Rep</th>
                <th>Email</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for n in ngos %}
            <tr>
                <td>{{ n.id }}</td>
                <td>{{ n.ngo_name }}</td>
                <td>{{ n.representative_name }}</td>
                <td>{{ n.email }}</td>
                <td>{{ n.status }}</td>
            </tr>
            {% else %}
            <tr><td colspan="5" class="text-center">No NGO submissions</td></tr>
            {% endfor %}
        </tbody>
    </table>

    <h3 class="mb-3 mt-5">Payments</h3>
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>User</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Update Status</th>
            </tr>
        </thead>
        <tbody>
            {% for p in payments %}
            <tr>
                <td>{{ p.id }}</td>
                <td>{{ p.user.email }}</td>
                <td>{{ p.amount }}</td>
                <td>{{ p.status }}</td>
                <td>
                    <form action="{{ url_for('admin.update_payment', payment_id=p.id) }}" method="POST" class="d-flex">
                        <select name="status" class="form-select form-select-sm me-2">
                            <option value="Pending" {% if p.status == 'Pending' %}selected{% endif %}>Pending</option>
                            <option value="Processing" {% if p.status == 'Processing' %}selected{% endif %}>Processing</option>
                            <option value="Completed" {% if p.status == 'Completed' %}selected{% endif %}>Completed</option>
                        </select>
                        <button type="submit" class="btn btn-sm btn-success">Update</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr><td colspan="5" class="text-center">No payments yet</td></tr>
            {% endfor %}
        </tbody>
    </table>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

